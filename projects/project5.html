<!doctype html>
<html class="no-js" lang="japanese">
<head>
      <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>My Portfolio - 大量のテキストファイルを Voicevox でオーディオブック化する</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Source+Serif+Pro:400,700">
    <link rel="stylesheet" type="text/css" href="https://yt-pf.github.io/portfolio/theme/css/main.css">


</head>
<body itemscope itemtype="http://schema.org/Blog">
<header class="site-header">
    <a href="https://yt-pf.github.io/portfolio">
    </a>
    <h1 itemprop="name"><a href="https://yt-pf.github.io/portfolio">My Portfolio</a></h1>
</header>
    <section class="main-content">
  <article>
    <header>
      <h2>大量のテキストファイルを Voicevox でオーディオブック化する</h2>
    </header>
    

    <h3>概要</h3>
<h4>課題</h4>
<ul>
<li>紙や画面で大量のテキストを読むと目が疲れる。</li>
<li>目を休めながらでも学習したいが、手軽にテキストを音声化できる手段が少ない。</li>
</ul>
<h4>解決策</h4>
<p>音声学習なら目を瞑って休ませながらでもインプットができる。</p>
<p>第三者に朗読を依頼するとコストがかかるが、機械による音声合成であれば多少の不自然さはあるものの、コストを掛けずに目的を達成できる。</p>
<h4>目的</h4>
<p>テキストファイル（複数）を Voicevox で自動音声合成し、ファイルごとのオーディオブック（MP3/WAV）にまとめる。</p>
<h4>メリット</h4>
<ul>
<li>コスト削減：人に朗読依頼する費用が不要</li>
<li>スキマ時間活用：通勤・通学・家事中など、隙間時間に学習</li>
<li>ハンズフリー：手が自由になるので、他の作業と同時に聞ける</li>
</ul>
<h4>デメリット</h4>
<ul>
<li>合成音声は機械的で自然さに限界がある</li>
<li>長文をそのまま渡すと VoiceVox がエラーになる（後述の対策参照）</li>
</ul>
<h3>使用ライブラリ・ツール</h3>
<ul>
<li>Voicevox Core 0.16.0</li>
<li>sox</li>
</ul>
<h3>想定する動作環境</h3>
<ul>
<li>Google Colab</li>
<li>または、Jupyter Notebook が実行できるローカル環境など<ul>
<li>Ubuntu 系の Linux 環境ではそのまま実行できるが、Windows, Mac 環境では必要に応じて編集が必要</li>
</ul>
</li>
</ul>
<h3>仕様</h3>
<p>Voicevox は長文を一度に合成しようとするとエラーを出力してしまう。
そこで、テキストファイルから音声合成するテキストを一行ずつ読み込み、結合している。</p>
<p>テキストファイルの読み込み</p>
<p>↓</p>
<p>1 行ずつ音声合成し、中間ファイルを作成</p>
<p>↓</p>
<p>中間ファイルを結合</p>
<h3>工夫した点</h3>
<table>
<thead>
<tr>
<th>項目</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>無音挿入</td>
<td>0.5  秒のサイレンスで行間を埋め、リズムの違和感を緩和</td>
</tr>
<tr>
<td>速度調整</td>
<td>sox の tempo エフェクトで倍速再生（例: 1.5×）</td>
</tr>
<tr>
<td>音質重視</td>
<td>pydub より音質が良かった。CLI で簡単操作できるのも魅力</td>
</tr>
</tbody>
</table>
<h3>今後の改善アイデア</h3>
<ul>
<li>テキスト前処理の自動化<ul>
<li>改行・句読点の正規化、長すぎる行の自動分割</li>
</ul>
</li>
<li>要約 AI との連携<ul>
<li>要点だけを音声化すると学習効率が向上</li>
</ul>
</li>
<li>非同期処理化<ul>
<li>Google Colab ではランタイム切断の問題があるので、それがネックになるおそれ</li>
</ul>
</li>
</ul>
<h3>実行方法</h3>
<ol>
<li>Jupyter Notebook でファイルを開く</li>
<li>1 セル目の設定項目を編集する</li>
<li>全セルを順に実行</li>
</ol>
<h3>ファイル</h3>
<p><a href="https://yt-pf.github.io/portfolio/pages/project5/voicevox-batch.ipynb">voicevox-batch.ipynb</a></p>
<h3>アーカイブ</h3>
<p>Voicevox Engine の Docker 版を利用した Python スクリプトは<a href="https://yt-pf.github.io/portfolio/pages/project5/voicevox-batch-old.py">こちら</a>（過去の作品のため、アーカイブ）</p>

  </article>
    </section>

<footer class="site-footer">
    <p>&copy; User </p>
</footer></body>
</html>