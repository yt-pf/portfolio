Title: 大量のテキストファイルを Voicevox でオーディオブック化する
Category: Projects
Slug: project5

### 概要

#### 課題

- 紙や画面で大量のテキストを読むと目が疲れる。
- 目を休めながらでも学習したいが、手軽にテキストを音声化できる手段が少ない。

#### 解決策

音声学習なら目を瞑って休ませながらでもインプットができる。

第三者に朗読を依頼するとコストがかかるが、機械による音声合成であれば多少の不自然さはあるものの、コストを掛けずに目的を達成できる。

#### 目的

テキストファイル（複数）を Voicevox で自動音声合成し、ファイルごとのオーディオブック（MP3/WAV）にまとめる。

#### メリット

- コスト削減：人に朗読依頼する費用が不要
- スキマ時間活用：通勤・通学・家事中など、隙間時間に学習
- ハンズフリー：手が自由になるので、他の作業と同時に聞ける

#### デメリット

- 合成音声は機械的で自然さに限界がある
- 長文をそのまま渡すと VoiceVox がエラーになる（後述の対策参照）

### 使用ライブラリ・ツール

- Voicevox Core 0.16.0
- sox

### 想定する動作環境

- Google Colab
- または、Jupyter Notebook が実行できるローカル環境など
  - Ubuntu 系の Linux 環境ではそのまま実行できるが、Windows, Mac 環境では必要に応じて編集が必要

### 仕様

Voicevox は長文を一度に合成しようとするとエラーを出力してしまう。
そこで、テキストファイルから音声合成するテキストを一行ずつ読み込み、結合している。

テキストファイルの読み込み

↓

1 行ずつ音声合成し、中間ファイルを作成

↓

中間ファイルを結合

### 工夫した点

| 項目     | 内容                                                   |
| -------- | ------------------------------------------------------ |
| 無音挿入 | 0.5  秒のサイレンスで行間を埋め、リズムの違和感を緩和  |
| 速度調整 | sox の tempo エフェクトで倍速再生（例: 1.5×）          |
| 音質重視 | pydub より音質が良かった。CLI で簡単操作できるのも魅力 |

### 今後の改善アイデア

- テキスト前処理の自動化
  - 改行・句読点の正規化、長すぎる行の自動分割
- 要約 AI との連携
  - 要点だけを音声化すると学習効率が向上
- 非同期処理化
  - Google Colab ではランタイム切断の問題があるので、それがネックになるおそれ

### 実行方法

1. Jupyter Notebook でファイルを開く
1. 1 セル目の設定項目を編集する
1. 全セルを順に実行

### ファイル

[voicevox-batch.ipynb]({static}voicevox-batch.ipynb)

### アーカイブ

Voicevox Engine の Docker 版を利用した Python スクリプトは[こちら]({static}voicevox-batch-old.py)（過去の作品のため、アーカイブ）
